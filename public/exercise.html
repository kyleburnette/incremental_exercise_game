<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Globetrotter | Exercise</title>
    <meta name="comp1800 boilerplate code" content="my bcit project">
    <meta name="author" content="BCIT">

    <!-- Bootstrap for Mobile-first, and JQuery -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <link rel="stylesheet" href="styles/bootstrap-color.css">

    <!-- Optional styles and scripts of your own -->
    <link rel="stylesheet" href="styles/layout.css">
    <link rel="stylesheet" href="styles/exercise.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css">

</head>

<body>

    <!-------------------------------------->
    <!-- The following is HTML for layout -->
    <!-------------------------------------->
    <!-- Header Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-custom">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Globetrotter</a>
            <button class="navbar-toggler custom-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="main.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="profile.html">Profile</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="#">Exercise</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="feedback.html">Feedback</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="index.html" onclick="logOut()">Logout</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="container mt-3">
            <div class="exercise-setup">
                <h2 class="display-6 exercise-heading">Exercise Setup</h2>
            </div>
            <hr />
            <div class="container-fluid" id="disclaimer">
                <h3 id="desktop-warning">
                    <!-- If the user is desktop -->
                </h3>
                <p>
                    <strong>DISCLAIMER</strong> - You need to keep the web application open on your phone in order for
                    this to function properly until a mobile application is made.
                </p>
                <p>
                    Statistics may not be 100%
                    accurate,
                    but will be as close as possible to true accuracy.
                </p>
                <p>
                    Exercise entries will only be made for sessions that last longer than 3 minutes.
                </p>
                <p>
                    Exercise statistics will be kept for your personal use for 30 days. After 30 days, the entry will be
                    removed from the database.
                </p>
            </div>
            <div class="setup-button">
                <!-- Button trigger modal -->
                <button type=" button" class="btn btn-primary" data-bs-toggle="modal"
                    data-bs-target="#pathRoutingModal">
                    Start Setup
                </button>
            </div>
        </div>

        <!-- Map View -->
        <div class="container-fluid mt-3">
            <div class="d-grid timer">
                <button type="button" class="btn btn-primary mt-2 timeTotal">Time to Destination:
                    <span id="timeGiven"></span></button>
            </div>
            <div id="mapView">
                <!-- Map View will go here -->
            </div>
            <hr class="map-line" />
            <div class="d-flex justify-content-between">
                <button type="button" class="btn btn-danger stop-button mt-1" onclick="endExercise()"
                    data-bs-dismiss="modal" data-bs-toggle="modal" data-bs-target="#completedModal">Stop</button>
                <button type="button" class="btn btn-primary mt-1 timer">Current Time: <span id="timeTaken">
                    </span></button>
            </div>
        </div>
    </div>

    <div class="filler"></div>

    <!-- Footer Navigation Bar -->
    <nav class="navbar fixed-bottom footbar-custom">
        <div class="container-fluid">
            <a href="main.html" class="footer-btn home-btn"><i class="fa fa-home"></i></a>
            <a href="#" aria-current="page" class="footer-btn start-btn"><i
                    class="fa fa-running footer-btn-active"></i></a>
            <a href="stats.html" class="footer-btn stat-btn"><i class="fa fa-chart-bar"></i></a>
        </div>
    </nav>

    <!-- Session Completed Modal -->
    <div class="modal fade" id="completedModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="completedLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="completedLabel">Session Completed</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                        onclick="window.location.reload()"></button>
                </div>
                <div class="modal-body">
                    <div id="error-message">
                        <!-- Error message for routing if occurred -->
                    </div>
                    <h5>Total Time</h5>
                    <p id="totalTime">Undetermined</p>
                    <hr />
                    <h5>Distance Travelled</h5>
                    <p id="distanceTravelled">Undetermined</p>
                    <hr />
                    <h5>Estimated Steps Taken</h5>
                    <p id="estimatedSteps">Undetermined</p>
                    <hr />
                    <h5>Estimated Calories Burned</h5>
                    <p id="estimatedCalories">Undetermined</p>
                    <hr />
                    <h5>Bonus Score Rewarded</h5>
                    <p id="bonusScore">Undetermined</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal" data-bs-toggle="modal"
                        data-bs-target="#adjustmentModal">Continue</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Adjustment & Feedback Modal -->
    <div class="modal fade" id="adjustmentModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="adjustmentLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="adjustmentLabel">Adjustments & Feedback</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                        onclick="window.location.reload()"></button>
                </div>
                <div class="modal-body">
                    <h5>Map Routing Adjustments</h5>
                    <div class="container mt-3">
                        <h6>Difficulty (Time Limit)</h6>
                        <input type="radio" class="btn-check" name="difficultyRating" id="option1" autocomplete="off"
                            value="1.25">
                        <label class="btn btn-difficulty" for="option1">Easier</label>

                        <input type="radio" class="btn-check" name="difficultyRating" id="option2" autocomplete="off"
                            value="1" checked>
                        <label class="btn btn-difficulty" for="option2">Equal</label>

                        <input type="radio" class="btn-check" name="difficultyRating" id="option3" autocomplete="off"
                            value="0.75">
                        <label class="btn btn-difficulty" for="option3">Harder</label>
                    </div>
                    <div class="container mt-3">
                        <h6>Duration (Time to Destination)</h6>
                        <input type="radio" class="btn-check" name="durationRating" id="option2-1" autocomplete="off"
                            value="1.25">
                        <label class="btn btn-difficulty" for="option2-1">Easier</label>

                        <input type="radio" class="btn-check" name="durationRating" id="option2-2" autocomplete="off"
                            value="1" checked>
                        <label class="btn btn-difficulty" for="option2-2">Equal</label>

                        <input type="radio" class="btn-check" name="durationRating" id="option2-3" autocomplete="off"
                            value="0.75">
                        <label class="btn btn-difficulty" for="option2-3">Harder</label>
                    </div>
                    <div class="container mt-3">
                        <label for="customRange3" class="form-label">Rate the Session</label>
                        <input type="range" class="form-range" name="exerciseRating" min="1" max="5" step="1">
                    </div>
                    <div class="d-flex justify-content-between mt-3">
                        <p>1</p>
                        <p>2</p>
                        <p>3</p>
                        <p>4</p>
                        <p>5</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"
                        onClick="window.location.reload();">Skip</button>
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal" data-bs-toggle="modal"
                        data-bs-target="#confirmModal">Apply</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Confirm Selection? -->
    <div class="modal fade" id="confirmModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="confirmLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="confirmLabel">Confirm Selection?</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                        onclick="window.location.reload()"></button>
                </div>
                <div class="modal-body">
                    Are these the adjustments and feedback you want to submit?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-bs-toggle="modal"
                        data-bs-target="#adjustmentModal">Back</button>
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal"
                        onclick="applyFeedback()">Submit</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Routing Modal -->
    <div class="modal fade" id="pathRoutingModal" tabindex="-1" aria-labelledby="pathRoutingLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="pathRoutingLabel">Path Routing Options</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <h1 class="h5">Choose your desired method of routing.</h1>
                    <p class="mt-3">Optimal routing allows you to pick a destination and you will be provided with
                        the
                        fastest route to
                        the destination.</p>
                    <div class="form-check mt-3">
                        <label class="form-check-label" for="flexRadioDefault1">
                            Enable optimal routing
                        </label>
                        <input class="form-check-input" type="radio" name="routingOption" id="flexRadioDefault1"
                            value="on">
                    </div>
                    <div class="form-check">
                        <label class="form-check-label" for="flexRadioDefault2">
                            Disable routing
                        </label>
                        <input class="form-check-input" type="radio" name="routingOption" id="flexRadioDefault2"
                            value="off" checked>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal" data-bs-toggle="modal"
                        data-bs-target="#destinationModal" onclick="setRouteOption()">Continue</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Destination Selection Modal -->
    <div class="modal fade" id="destinationModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="destinationLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="destinationLabel">Destination Selection</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="map"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="initMap()">Reset</button>
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal"
                        onclick="toggleMap()">Start</button>
                </div>
            </div>
        </div>
    </div>

    <!----------------------------------------------->
    <!-- JS: Boostrap, Firebase, API related    -->
    <!----------------------------------------------->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous">
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js"
        integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous">
    </script>
    <script src="https://www.gstatic.com/firebasejs/8.2.9/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.9/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.9/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/ui/4.6.1/firebase-ui-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.9/firebase-storage.js"></script>
    <script async type="text/javascript" defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA2xvJALxbNJvyjbgPz9knJMZ9DLxrrZ0U&callback=initMap">
    </script>

    <!--------------------------------------------------------------------->
    <!-- JS files: Your own JavaScript functions included here    -->
    <!--------------------------------------------------------------------->
    <script src="scripts/firebase_api.js"></script>
    <script src="scripts/exercise-settings.js" type="text/javascript"></script>
    <script src="scripts/exercise.js" type="text/javascript"></script>
    <script src="scripts/logout.js" type="text/javascript"></script>
</body>

</html>